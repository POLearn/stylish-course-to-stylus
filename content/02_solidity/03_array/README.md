# æ•°ç»„åœ¨ Stylus ä¸­

ä¸ Solidity ç±»ä¼¼ï¼Œ**æ•°ç»„**å¯ä»¥æ˜¯ **å›ºå®šå¤§å°**ï¼ˆåœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼‰æˆ– **åŠ¨æ€å¤§å°**ï¼ˆåœ¨è¿è¡Œæ—¶å¢é•¿æˆ–ç¼©å°ï¼‰ã€‚åœ¨ Stylus ä¸­ï¼Œæ•°ç»„éµå¾ª Rust çš„å­˜å‚¨åŸåˆ™ï¼ŒåŒæ—¶ä¿æŒ Solidity ç±»ä¼¼çš„å¯ç”¨æ€§ã€‚

## Solidity ä¸­çš„æ•°ç»„

Solidity ä¸­çš„æ•°ç»„ç”¨äºå­˜å‚¨ç›¸åŒç±»å‹çš„å¤šä¸ªå…ƒç´ ï¼Œå¯ä»¥æ˜¯ **å›ºå®šå¤§å°** æˆ– **åŠ¨æ€å¤§å°**ã€‚å›ºå®šå¤§å°æ•°ç»„çš„é•¿åº¦æ˜¯é¢„å®šçš„ï¼Œè€ŒåŠ¨æ€æ•°ç»„å¯ä»¥åœ¨è¿è¡Œæ—¶å¢é•¿æˆ–ç¼©å°ã€‚

Solidity ä¸­çš„æ•°ç»„é€šè¿‡ `type[]` è¯­æ³•å£°æ˜åŠ¨æ€æ•°ç»„ï¼Œæˆ–è€…é€šè¿‡ `type[size]` è¯­æ³•å£°æ˜å›ºå®šå¤§å°æ•°ç»„ã€‚æ•°ç»„å¯ä»¥åŒ…å«ä»»ä½•æœ‰æ•ˆçš„ Solidity æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬åŸå§‹ç±»å‹ï¼ˆ`uint`ã€`address`ã€`bool`ï¼‰ã€ç»“æ„ä½“ï¼Œç”šè‡³æ˜¯å…¶ä»–æ•°ç»„ã€‚

```solidity
// Solidity æ•°ç»„ç¤ºä¾‹

// åŠ¨æ€æ•°ç»„ï¼ˆå¤§å°å¯ä»¥å˜åŒ–ï¼‰
uint256[] public dynamicArray;

// å›ºå®šå¤§å°æ•°ç»„ï¼ˆå¤§å°ä¸º 5ï¼‰
uint256[5] public fixedArray;
```

## Stylus ä¸­çš„æ•°ç»„

åœ¨ Stylus ä¸­ï¼Œæ•°ç»„éµå¾ªç±»ä¼¼çš„æ¦‚å¿µï¼Œä½†ä½¿ç”¨ Rust çš„è¯­æ³•å®ç°ã€‚Stylus æä¾›äº† `StorageVec<T>` æ¥è¡¨ç¤º **åŠ¨æ€æ•°ç»„**ï¼Œè€Œå›ºå®šå¤§å°çš„æ•°ç»„ä½¿ç”¨ `[T; N]` æ¥å£°æ˜ã€‚ä¸¤ç§ç±»å‹éƒ½åˆ©ç”¨äº† Rust é«˜æ•ˆçš„å†…å­˜ç®¡ç†ï¼ŒåŒæ—¶ä¿æŒäº† Solidity ç±»ä¼¼çš„è¡Œä¸ºã€‚

```rust
// Stylus Rust æ•°ç»„ç¤ºä¾‹
#[storage]
pub struct Contract {
    uint256[3] arr2;
}
```

### å·®å¼‚ä¸ç›¸ä¼¼ä¹‹å¤„

| ç‰¹æ€§         | Solidity                    | Stylus (Rust)               |
|--------------|-----------------------------|-----------------------------|
| è¯­æ³•         | `type[]` æˆ– `type[size]`      | `StorageVec<T>` æˆ– `[T; N]`  |
| å¤§å°         | å›ºå®šæˆ–åŠ¨æ€                  | å›ºå®šæˆ–åŠ¨æ€                  |
| å¯è¿­ä»£æ€§     | æ”¯æŒå¾ªç¯                    | æ”¯æŒå¾ªç¯                    |
| å­˜å‚¨ç±»å‹     | å­˜å‚¨åœ¨åˆçº¦å­˜å‚¨ä¸­            | åŠ¨æ€ä½¿ç”¨ `StorageVec`ï¼Œå›ºå®šä½¿ç”¨ `[T; N]` |

### æ•°ç»„åˆçº¦

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä¸€ä¸ªç®€å•çš„æ•°ç»„åŠŸèƒ½åˆçº¦ã€‚ä½ å¯ä»¥åœ¨ [GitHub ä»“åº“](https://github.com/POLearn/stylish-course-to-stylus/tree/master/contract/array) è·å–å®Œæ•´çš„æºä»£ç å¹¶åœ¨ IDE ä¸­åŠ è½½ã€‚

![](https://raw.githubusercontent.com/POLearn/stylish-course-to-stylus/refs/heads/master/content/assets/images/array_contract.png)

è¯¥åˆçº¦åŒ…å«ä¸€ä¸ª **åŠ¨æ€æ•°ç»„** `arr`ã€‚ä¸å›ºå®šå¤§å°æ•°ç»„ä¸åŒï¼ŒåŠ¨æ€æ•°ç»„å¯ä»¥åœ¨è¿è¡Œæ—¶å¢é•¿æˆ–ç¼©å°ï¼Œä½¿å®ƒä»¬åœ¨å­˜å‚¨å¤šä¸ªå€¼æ—¶æ›´åŠ çµæ´»ã€‚

```rust
sol_storage! {
    #[entrypoint]
    pub struct Contract {
        uint256[] arr;
    }
}
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å†…ç½®æ–¹æ³•æ¥é«˜æ•ˆåœ°ç®¡ç†å’Œæ“ä½œå­˜å‚¨çš„æ•°æ®ã€‚

```rust
// å‘åŠ¨æ€æ•°ç»„æ·»åŠ å…ƒç´ 
pub fn push(&mut self, i: U256) {
    self.arr.push(i);
}

// è·å–æ•°ç»„ä¸­æŒ‡å®šç´¢å¼•çš„å…ƒç´ 
pub fn get_element(&self, index: U256) -> U256 {
    self.arr.get(index).unwrap()
}

// è·å–æ•°ç»„çš„é•¿åº¦
pub fn get_arr_length(&self) -> U256 {
    U256::from(self.arr.len())
}

// ç§»é™¤å…ƒç´ ï¼ˆä¸ä¼šæ”¹å˜æ•°ç»„çš„å¤§å°ï¼‰
pub fn remove(&mut self, index: U256) {
    let mut last_element = self.arr.setter(index).unwrap();
    last_element.erase()
}
```

- **`push`**ï¼šè¯¥å‡½æ•°é€šè¿‡ `.push(i)` å‘åŠ¨æ€æ•°ç»„æ·»åŠ æ–°å…ƒç´ ã€‚ç”±äº Stylus æ•°ç»„æ˜¯å¯è°ƒæ•´å¤§å°çš„ï¼Œå› æ­¤å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æ–°å€¼ã€‚
  
- **`get_element`**ï¼šä½¿ç”¨ `.get(index)` è·å–æŒ‡å®šç´¢å¼•å¤„çš„å€¼ã€‚`.unwrap()` ç¡®ä¿è¿”å›æœ‰æ•ˆå€¼ï¼Œé˜²æ­¢ç´¢å¼•è¶Šç•Œé”™è¯¯ã€‚
  
- **`get_arr_length`**ï¼šè¿”å›æ•°ç»„çš„å…ƒç´ æ€»æ•°ã€‚`.len()` è·å–æ•°ç»„çš„é•¿åº¦ï¼Œç„¶åè½¬æ¢ä¸º `U256` ä»¥åŒ¹é… Solidity çš„è¡Œä¸ºã€‚
  
- **`remove`**ï¼šè¯¥å‡½æ•°ä½¿ç”¨ `.setter(index).erase()` ç§»é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ã€‚ç„¶è€Œï¼Œä¸ Solidity çš„ `pop()` ä¸åŒï¼Œè¿™ä¸ä¼šç¼©å°æ•°ç»„å¤§å°ï¼›å®ƒåªæ˜¯æ¸…é™¤ç»™å®šç´¢å¼•å¤„çš„å€¼ã€‚

### ä»»åŠ¡ï¼šç¼–è¯‘ä¸éƒ¨ç½²

ç°åœ¨ï¼Œè®©æˆ‘ä»¬**ç¼–è¯‘**å¹¶**éƒ¨ç½²**åˆçº¦ã€‚

![ç¼–è¯‘](https://raw.githubusercontent.com/POLearn/stylish-course-to-stylus/refs/heads/master/content/assets/images/array_compile.png)

![éƒ¨ç½²](https://raw.githubusercontent.com/POLearn/stylish-course-to-stylus/refs/heads/master/content/assets/images/array_deploy.png)

éƒ¨ç½²åï¼Œå¯èƒ½éœ€è¦**æ¿€æ´»**åˆçº¦ï¼Œè¿™å¯èƒ½ä¼šè§¦å‘ç¬¬äºŒä¸ªäº¤æ˜“ã€‚ä¸€æ—¦å®Œæˆï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç»§ç»­**è®¾ç½®ï¼ˆæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´æ˜¯æ¨é€ï¼‰å…ƒç´ åˆ°åˆçº¦æ•°ç»„ä¸­**ã€‚åˆ«å¿˜äº†**æäº¤ä½ çš„äº¤æ˜“åˆ° Proof of Learn**ï¼ğŸš€

ä½ è¿˜å¯ä»¥æŸ¥çœ‹ä¸€äº›å®é™…ç¤ºä¾‹ï¼š  
ğŸ”— [Arbitrum Stylus ç¤ºä¾‹ â€“ æ•°ç»„](https://arbitrum-stylus-by-example.vercel.app/basic_examples/arrays)