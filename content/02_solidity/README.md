## 深入探索 Stylus 中的映射和数组

### Mappings

在 Stylus 中，**映射**与 Solidity 中的哈希表类似，允许你将数据存储为键值对。键可以是任何内置类型，而值则可以是任何你需要存储的数据类型。

在 Rust 中，映射是通过 `StorageMap<keyType, StorageType>` 来创建的，其中 `keyType` 通常来自 `alloy_primitives`，`StorageType` 则是任何符合需求的类型（如 `StorageU256`、`StorageAddress` 等）。

在 Solidity 中，映射通过以下语法声明：`mapping(keyType => valueType)`，其中 `keyType` 可以是基本类型，如 `uint`、`address`、`string`，甚至是另一个合约，`valueType` 可以是任何类型，包括数组或其他映射。

**重要提示**：映射是**不可迭代的**，这意味着你无法直接循环遍历它们，必须拥有每个键的引用才能访问其对应的值。

### Arrays

在 Stylus 中，**数组**的工作方式与 Solidity 相似，但在声明和使用时有一些关键的不同点。

1. **动态大小数组**：这些数组可以在运行时调整大小，意味着可以根据需要添加或删除元素。它们灵活且广泛使用，适用于事先无法确定数组大小的情况。

2. **固定大小数组**：这些数组的大小在编译时确定，一旦设置，大小就无法改变。如果你知道需要存储的元素的确切数量，固定大小数组非常有用。

3. **自定义结构体元素数组**：数组也可以存储更复杂的数据类型，如结构体。在这种情况下，数组中的每个元素都是一个自定义结构体，允许进行高度组织的数据存储。

在 Stylus 中，数组提供了与 Solidity 相同的多样性，允许你根据合约的需求自由选择动态数组或固定大小数组。

### 总结

映射和数组在 Stylus 中的应用类似于 Solidity，适用于各种数据存储和结构设计需求。你可以根据合约的具体要求选择不同的实现方式。随着对这些更复杂类型的理解深入，你可以在 Stylus 中构建更强大、更灵活的智能合约。